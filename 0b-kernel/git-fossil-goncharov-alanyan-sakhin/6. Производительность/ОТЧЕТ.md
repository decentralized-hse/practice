# Этап 6: Анализ производительности

## Методология тестирования

Все тесты производительности проводились на реальном репозитории Git, который был импортирован в Fossil. Это позволяет провести справедливое сравнение на одинаковых данных.

**Характеристики тестового репозитория:**
- Количество коммитов: 196 325
- Количество веток в Git: 6 основных
- Количество веток в Fossil: 2 975 (включая PR ветки)
- Количество тегов в Git: 1 000
- Количество тегов в Fossil: 3 976
- Размер Git репозитория: 569 MB
- Размер Fossil репозитория: 2.0 GB
- Размер экспорта (fast-export): 7.5 GB

## 6.1. Бенчмарки операций просмотра истории

### Просмотр истории коммитов

| Количество коммитов | Git `log --oneline` | Fossil `timeline --limit` | Отношение (Fossil/Git) |
|---------------------|---------------------|---------------------------|-------------------------|
| 100 коммитов | 0.059 сек | 0.020 сек | 0.34x (Fossil быстрее) |
| 1 000 коммитов | 0.053 сек | 0.128 сек | 2.42x (Git быстрее) |
| 10 000 коммитов | 0.083 сек | 1.188 сек | 14.31x (Git быстрее) |

**Выводы:**
- Git оптимизирован для быстрого просмотра больших объемов истории
- Fossil использует SQLite, что может быть медленнее для сложных запросов
- Для небольших репозиториев разница незначительна

## 6.2. Бенчмарки операций работы с ветками

### Просмотр веток

| Операция | Git `branch -a` | Fossil `branch list` | Отношение (Fossil/Git) |
|----------|-----------------|---------------------|-------------------------|
| Просмотр всех веток | 0.012 сек | 0.187 сек | 15.58x (Git быстрее) |

**Выводы:**
- Git использует легковесные указатели, что делает операции быстрыми
- Fossil должен обрабатывать все ветки в базе данных, включая скрытые

## 6.3. Бенчмарки операций просмотра тегов

### Просмотр тегов

| Операция | Git `tag` | Fossil `tag list` | Количество тегов |
|----------|-----------|-------------------|------------------|
| Просмотр всех тегов | 0.011 сек | 0.011 сек | Git: 1 000 / Fossil: 3 976 |

**Выводы:**
- Операции с тегами эффективны в обеих системах
- Fossil показывает сопоставимую производительность даже при большем количестве тегов

## 6.4. Бенчмарки операций просмотра коммитов

### Просмотр информации о коммите

| Операция | Git `show --stat` | Fossil `info <uuid>` | Отношение (Fossil/Git) |
|----------|-------------------|---------------------|------------------------|
| Просмотр коммита | 0.015-0.025 сек | 0.010-0.020 сек | 1x |

**Выводы:**
- Обе команды выполняются быстро
- Разница незначительна для практического использования

## 6.5. Бенчмарки операций поиска

### Поиск в файлах

| Операция | Git `grep` | Fossil `grep` | Отношение (Fossil/Git) |
|----------|------------|---------------|-------------------------|
| Поиск в одном файле | 0.010 сек | 0.008 сек | 0.80x (Fossil быстрее) |

**Выводы:**
- Обе системы эффективны для поиска
- Fossil автоматически ищет в истории, что может быть удобнее

## 6.6. Бенчмарки операций diff

### Просмотр различий между коммитами

| Операция | Git `diff` | Fossil `diff` | Отношение (Fossil/Git) |
|----------|------------|---------------|------------------------|
| Diff между коммитами | 0.020-0.040 сек | 0.015-0.030 сек | 1x |

**Выводы:**
- Обе команды эффективны для просмотра различий
- Разница незначительна для практического использования

## 6.7. Анализ использования дискового пространства

### Размер репозиториев

| Тип | Размер | Описание |
|-----|--------|----------|
| Git bare репозиторий | 569 MB | Сжатое хранилище объектов |
| Fossil репозиторий | 2.0 GB | SQLite база данных |
| Git fast-export | 7.5 GB | Текстовый формат экспорта |

**Выводы:**
- Git использует более эффективное сжатие объектов
- Fossil хранит данные в SQLite, что может быть менее эффективно по размеру

## 6.8. Масштабируемость

### Анализ масштабируемости по количеству коммитов

**Выводы:**
- Git оптимизирован для работы с большими репозиториями
- Fossil может быть медленнее на очень больших репозиториях
