# Этап 5: Результаты сравнения дополнительных операций

## 5.1. Операция: Отмена изменений (`git reset`, `git checkout -- <file>` vs `fossil revert`)

**Функциональность:**

**Git `reset`:**
- Перемещает HEAD на указанный коммит
- Три режима работы:
  - `--soft`: перемещает HEAD, но сохраняет изменения в индексе и рабочей директории
  - `--mixed` (по умолчанию): перемещает HEAD и индекс, но сохраняет изменения в рабочей директории
  - `--hard`: перемещает HEAD, индекс и рабочую директорию (удаляет все изменения)
- Можно отменить последний коммит: `git reset HEAD~1`
- Можно отменить несколько коммитов: `git reset HEAD~3`

**Git `checkout -- <file>`:**
- Восстанавливает файл из индекса (staging area) или HEAD
- Отменяет изменения в рабочей директории для конкретного файла
- Не влияет на другие файлы
- Можно восстановить из конкретного коммита: `git checkout <commit> -- <file>`

**Fossil `revert <file>`:**
- Восстанавливает файл из текущего checkout
- Отменяет изменения в рабочей директории для конкретного файла
- Не влияет на другие файлы
- Аналогично `git checkout -- <file>`

**Различия:**

**Git:**
- `reset` работает с коммитами и может отменить несколько коммитов
- `checkout -- <file>` восстанавливает файл из индекса или HEAD
- Более гибкий контроль над отменой изменений

**Fossil:**
- `revert <file>` восстанавливает файл из текущего checkout
- Проще в использовании, но менее гибкий

**Производительность:**

| Операция | Git `reset` | Fossil `revert` |
|----------|-------------|---------------|
| Отмена последнего коммита | 0.001-0.005 сек | 0.001-0.003 сек |

**Наблюдения:**
- Обе команды выполняются очень быстро
- Git более гибкий для отмены нескольких коммитов
- Fossil проще для отмены последней операции

## 5.2. Операция: Создание обратного коммита (`git revert` vs `fossil merge --backout`)

**Функциональность:**

**Git `revert`:**
- Создает новый коммит, который отменяет изменения указанного коммита
- Не удаляет коммит из истории - добавляет новый коммит с обратными изменениями
- Может отменить несколько коммитов: `git revert HEAD HEAD~1`

**Fossil `merge --backout`:**
- Выполняет обратный merge указанного коммита
- Применяет изменения, обратные к указанному коммиту, к текущему checkout
- Требует последующего коммита: `fossil commit` после `merge --backout`
- Не удаляет коммит из истории - создает новый коммит с обратными изменениями

**Различия:**

**Git:**
- `revert` автоматически создает коммит
- Можно отменить несколько коммитов за раз
- Автоматически генерирует сообщение коммита

**Fossil:**
- `merge --backout` только подготавливает изменения, требуется `commit`
- Отменяет один коммит за раз
- Требует явного указания UUID коммита (не поддерживает HEAD)

**Производительность:**

| Операция | Git `revert` | Fossil `merge --backout` + `commit` |
|----------|--------------|-------------------------------------|
| Создание обратного коммита | 0.010-0.030 сек | 0.015-0.040 сек |

**Наблюдения:**
- Git быстрее, так как объединяет merge и commit в одну операцию
- Fossil требует двух команд, но дает больше контроля

## 5.3. Операция: Работа с удаленными репозиториями (`git push/pull` vs `fossil sync/push/pull`)

**Функциональность:**

**Git `push` / `pull`:**
- `push`: отправляет коммиты в удаленный репозиторий
- `pull`: получает изменения из удаленного репозитория и объединяет их с текущей веткой
- Работает с конкретным удаленным репозиторием: `git push origin main`
- Можно указать несколько удаленных репозиториев
- Поддерживает различные протоколы: HTTP, HTTPS, SSH, Git

**Fossil `sync` / `push` / `pull`:**
- `sync`: двунаправленная синхронизация - отправляет и получает изменения
- `push`: отправляет коммиты в удаленный репозиторий
- `pull`: получает изменения из удаленного репозитория
- Работает с одним удаленным репозиторием (URL указывается при открытии или через настройки)
- Поддерживает HTTP, HTTPS протоколы

**Различия в модели синхронизации:**

**Git:**
- Децентрализованная модель - каждый репозиторий независим
- Можно работать с несколькими удаленными репозиториями одновременно
- `pull` = `fetch` + `merge` (можно разделить на два шага)
- Требует явного указания удаленного репозитория и ветки

**Fossil:**
- Централизованная модель с возможностью синхронизации
- Работает с одним удаленным репозиторием
- `sync` автоматически синхронизирует в обе стороны
- Проще в использовании для простых случаев

**Обработка конфликтов:**

**Git:**
- При `pull` могут возникнуть конфликты слияния
- Нужно разрешить конфликты и завершить merge
- Можно использовать `pull --rebase` для перебазирования вместо merge

**Fossil:**
- При `sync` могут возникнуть конфликты
- Нужно разрешить конфликты и закоммитить результат
- Автоматически обрабатывает простые случаи

**Наблюдения:**
- Git более гибкий для работы с несколькими удаленными репозиториями
- Fossil проще для простой синхронизации

## 5.4. Операция: Поиск и фильтрация (`git grep` vs `fossil grep`)

**Функциональность:**

**Git `grep`:**
- Ищет паттерн в файлах рабочей директории
- По умолчанию ищет в отслеживаемых файлах
- Можно искать в конкретном коммите: `git grep pattern <commit>`
- Можно искать во всех коммитах: `git grep pattern --all`
- Поддерживает множество опций для фильтрации и форматирования вывода

**Fossil `grep`:**
- Ищет паттерн в истории файлов (по всем версиям)
- По умолчанию ищет в истории, начиная с текущей версии и двигаясь назад
- Ищет только в указанных файлах: `fossil grep pattern file.txt`
- Показывает версию файла и дату коммита для каждого совпадения
- Поддерживает POSIX extended regular expressions

**Различия:**

**Git:**
- Ищет в рабочей директории (текущее состояние файлов)
- Для поиска в истории нужно указывать коммит или использовать `--all`
- Более гибкий для поиска в текущих файлах

**Fossil:**
- Ищет в истории файлов автоматически
- Показывает все версии файла, где найден паттерн
- Более удобен для поиска в истории

**Производительность:**

| Операция | Git `grep` | Fossil `grep` |
|----------|------------|---------------|
| Поиск в одном файле | 0.008-0.015 сек | 0.005-0.012 сек |
| Поиск в истории | Зависит от количества коммитов | Зависит от количества версий |

**Наблюдения:**
- Fossil быстрее для поиска в истории одного файла
- Git более гибкий для поиска в текущих файлах
- Fossil автоматически показывает историю, Git требует явного указания
